{% extends 'layouts/base.html' %}
{%- set plan = development_plan -%}

{% block content %}

  <span class="govuk-caption-xl">Development plan</span>
  <h1 class="govuk-heading-xl">{{development_plan.reference}}</h1>

  <a href="{{ url_for('development_plan.edit', reference=plan.reference) }}" class="govuk-link">Edit record</a>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <section class="app-summary-card">
        <header class="app-summary-card__header">
          <h2 class="app-summary-card__title">
            Plan record
          </h2>
        </header>
        <div class="app-summary-card__body">
          <dl class="govuk-summary-list govuk-!-margin-bottom-0">
            <div class="govuk-summary-list__row">
              <dt class="govuk-summary-list__key">Reference</dt>
              <dd class="govuk-summary-list__value">{{ plan.reference }}</dd>
            </div>
            <div class="govuk-summary-list__row">
              <dt class="govuk-summary-list__key">Name</dt>
              <dd class="govuk-summary-list__value">{{ plan.name }}</dd>
            </div>
            <div class="govuk-summary-list__row">
              <dt class="govuk-summary-list__key">Organisation</dt>
              <dd class="govuk-summary-list__value">
                <ul class="govuk-list">
                {% for org in plan.organisations %}
                  <li>{{ org.name }}</li>
                {% endfor %}
                </ul>
              </dd>
            </div>
            <div class="govuk-summary-list__row">
              <dt class="govuk-summary-list__key">Documentation URL</dt>
              <dd class="govuk-summary-list__value"><a href="{{ plan.documentation_url }}" class="govuk-link">{{ plan.documentation_url }}</a></dd>
            </div>
          </dl>
        </div>
      </section>
    </div>
    <div class="govuk-grid-column-one-third">

      <div class="app-related-items" role="complementary">
        <h2 class="govuk-heading-s govuk-!-margin-bottom-0" id="view-the-data">
          Linked data
        </h2>
        <p class="govuk-hint govuk-!-font-size-14">You can view and add linked data to this plan</p>
        <nav role="navigation" aria-labelledby="view-the-data">
          <ul class="govuk-list govuk-!-font-size-16">
            <li>
              <a class="govuk-link" href="#timetable">Timetable events</a>
            </li>
            <li>
              <a class="govuk-link" href="#documents">Associated documents</a>
            </li>
          </ul>
        </nav>

      </div>

    </div>
  </div>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h2 id="timetable" class="govuk-heading-m govuk-!-margin-top-9">Timetable</h2>
      <p class="govuk-body">Record any events that happen during the plan-making process. Events can have already happened or happen on a future date.</p>
    </div>
  </div>

  <ul class="govuk-list govuk-list--bullet">
    {% for stage in development_plan.timetable %}
      <li>{{ stage.reference }}: {{ stage.development_plan_event.name }}, {{ stage.event_date }}</li>
    {% endfor %}
  </ul>
  <a href="{{ url_for('development_plan.add_event', reference=plan.reference) }}" class="govuk-button govuk-button--secondary">+ add event to timetable</a>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h2 id="documents" class="govuk-heading-m govuk-!-margin-top-9">Documents</h2>
      <p class="govuk-body">Record any associated documents. These can be documents that contain relevant policies, documents outlining activities or publication notices.</p>
    </div>
  </div>

  <ul class="govuk-list govuk-list--bullet">
    {% for document in development_plan.documents %}
      <li><a href="{{ document.documentation_url }}" class="govuk-link">{{ document.name }}</a> <span class="govuk-hint">({{ document.reference }})</span></li>
    {% endfor %}
  </ul>
  <a href="{{ url_for('development_plan.add_document', reference=plan.reference) }}" class="govuk-button govuk-button--secondary">+ add supporting document</a>

{% endblock content %}
